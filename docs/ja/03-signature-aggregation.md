---
id: signature-aggregation
title: Signature Aggregation
---

## Overview

非中央集権的な合意メカニズムを持つブロックチェーンではブロックを生成するたびに十分な数の投票 (署名) を収集する必要があります。合意の参加者が
多くなれば安全性も向上しますが、一方で署名の数によってブロックサイズが肥大化し検証にも時間がかかるためパフォーマンスの劣化が問題となります。
この問題を解決するために Bitcoin ([BIP340](https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki)) や Ethereum 2.0
では署名集約を取り入れてパフォーマンスを改善しようと取り組んでいます。

BLS 署名は双線形写像を使用した署名集約が可能な署名アルゴリズムの一種です。BLS 署名に関する最初の論文は非常に小さなサイズで実現できる電子署名
として出版されましたが、ペアリングとよばれるその技術からは他にもしきい値署名やブラインド署名のようないくつかの興味深い特徴が考案されました。
Ostracon でも BLS 署名によって収集した署名を単一の署名に集約することで 1) ブロックサイズの削減と 2) 検証回数の削減でパフォーマンスの向上を
図っています。

![BLS Signature Aggregation](/img/about-lbm/ostracon/signature-aggregation/bls_signature_aggregation.png)

## Public Key Abstraction

BLS 署名の導入に伴い、Ostracon ではノードごとにスキームの異なる署名鍵を同一のブロックチェーンインスタンス上で利用できるように設計を見直し
ました。つまり Ostracon ノードの運営者はノードを構築するときに、高速で実績のある Ed25519 署名と署名集約が可能な BLS 署名を選択できる
ようになります。この柔軟性によって、将来にもっと良い署名アルゴリズムを試験/採用する場合や、実装に脆弱性が発見された場合に柔軟に対処することが
できます。

## Why is this an experimental status?

BLS の導入にあたり、残念ながら BLS 署名集約は Ostracon のフォーク元である Tendermint の設計といくつかの点で競合していることが分かっています。
典型的な例は軽量ノードの Light Validation と呼ばれる簡易検証です。合意に参加したすべてのノードの公開鍵を持っていないクライアントであっても、
BFT 仮定に基づいて全 Voter 数の 2/3+1 個の投票の検証が成功すれば正しいブロックブロックとみなすことができます。しかし BLS 署名では合意に
参加した公開鍵が一つでも欠けていれば集約されたすべての署名を検証できなくなります。

性能の観点では、単一の署名生成/検証においては BLS 署名よりも Ed25519 署名の方が高速という事実があります。その遅さをブロックサイズ削減や
検証回数削減による改善が上回る分水嶺がどこなのかを注意深く調査しています。

| アルゴリズム      | 秘密鍵 | 公開鍵 | 署名 | 署名作成 | 署名検証 |
| :---------------- | -----: | -----: | ---: | -------: | -------: |
| ECDSA (secp256k1) |    96B |    64B |  64B |     92μs |    124μs |
| Ed25519           |    64B |    32B |  64B |     49μs |    130μs |
| BLS12-381         |    32B |    96B |  48B |    233μs |  1,149μs |

Table: 署名アルゴリズムの空間効率と処理時間効率。署名作成/検証のメッセージ長は 1024 バイト。

我々は将来的に BLS 署名をサポートする予定ですが、このような問題に対して下位互換性のない修正を行う予定があることから、現在では experimental
ステータスとしています。
